"use client";
import {useEffect, useState} from 'react';
import { Layout, Row, Col, Modal, Popover, Button, Switch } from 'antd';

import {HomePage} from "@/app/page.style.tsx";
import snakeLightSvg from '@/assets/svg/snake-Light.svg';
import siteProjectIcon1 from '@/assets/img/i1.png';
import siteProjectIcon2 from '@/assets/img/i2.png';
import siteProjectIcon3 from '@/assets/img/i3.png';
// import siteProjectIcon4 from '@/assets/img/i4.png';
// import siteProjectIcon5 from '@/assets/img/i5.png';
import siteProjectIcon6 from '@/assets/img/i6.png';
import githubSvgIcon from '@/assets/svg/github.svg';
import mailSvgIcon from '@/assets/svg/mail.svg';
import qqSvgIcon from '@/assets/svg/qq.svg';
import weixinSvgIcon from '@/assets/svg/weixin.svg';
import sponsorSvgIcon from '@/assets/svg/sponsor.svg';
import siteSvgIcon from "@/assets/svg/site.svg"
import projectSvgIcon from "@/assets/svg/project.svg"
import skillsSvgIcon from "@/assets/svg/skills.svg"
import skillPcSvgIcon from "@/assets/svg/skillPc.svg"
import skillWapSvgIcon from "@/assets/svg/skillWap.svg"
import qqImg from '@/assets/img/qqGroup.jpg';
import weixinImg from '@/assets/img/weixinGroup.jpg';
import sponsorImg from '@/assets/img/weixinSponsor.jpg';
import headPortraitKuang from '@/assets/img/head-portrait-kuang.png';
import location from "@/assets/svg/location.svg"
import briefcase from "@/assets/svg/briefcase.svg"
import policeBadge from "@/assets/img/policeBadge.png";
import Image from 'next/image';



const { Footer, Content } = Layout;

export default function Home() {

    const [isDesktop, setIsDesktop] = useState(true); // ÈªòËÆ§ÊòØÊ°åÈù¢Á´Ø
    const [isDarkMode, setIsDarkMode] = useState(false);// ÊéßÂà∂ÊòØ‰∏çÊòØÊöóÈªëÊ®°Âºè
    const [themeIcon,] = useState(snakeLightSvg); // ‰∏ªÈ¢òÂõæÊ†á
    const [showModal,setShowModal] = useState(false); //qqÂºπÊ°Ü
    const [popPicture,setPopPicture] = useState(""); //ÂºπÊ°ÜÂõæÁâá
    const [site, ] = useState([
        { title: "RocBlog", introduce: "Âü∫‰∫é.Net+Vue3ÁºñÁ®ãÁªÉ‰π†ÁîüÁöÑ‰∏™‰∫∫ÂçöÂÆ¢", img: siteProjectIcon2, link: "https://www.yangmufa.cn" },
        { title: "RocAdmin", introduce: "Âü∫‰∫é.Net+Vue3ÁöÑÈ≤≤Èπè‰∏≠ÂêéÂè∞Âø´ÈÄüÂºÄÂèëÊ°ÜÊû∂ÊºîÁ§∫Á´ô", img: siteProjectIcon3, link: "https://admin.yangmufa.cn" },
        { title: "RocFlow", introduce: "Âü∫‰∫é.Net+Vue3ÁöÑÈ≤≤ÈπèÂ∑•‰ΩúÊµÅÂø´ÈÄüÂºÄÂèëÊ°ÜÊû∂ÊºîÁ§∫Á´ô", img: siteProjectIcon6, link: "https:/flow.yangmufa.cn" },
        { title: "RocJilehe", introduce: "Âü∫‰∫éJavaScriptÁöÑÈ∏°‰πêÁõíÊºîÁ§∫Á´ô", img: siteProjectIcon6, link: "https://jilehe.yangmufa.cn" },
        { title: "RocAuthor(Êú¨Á´ô)", introduce: "Âü∫‰∫éReact+NextJsÁöÑÁ®ãÂ∫èÂëòÂú®Á∫øÁÆÄÂéÜÊºîÁ§∫Á´ô", img: siteProjectIcon6, link: "https://author.yangmufa.cn" },
    ]);// ÁΩëÁ´ô
    const [project, ] = useState([
        { title: "RocAdmin", introduce: "Âü∫‰∫éC#+.Net10+Abp.vNext9+Furion5+PostgreSql18+Vue3ÁöÑDDDÈ¢ÜÂüüÈ©±Âä®ÂæÆÊúçÂä°ÂêéÂè∞ÁÆ°ÁêÜÊ°ÜÊû∂, ÂÜÖÁΩÆÁî®Êà∑ÊùÉÈôêÁÆ°ÁêÜ„ÄÅÊó•Âøó„ÄÅ‰ª£Á†ÅÁîüÊàê Á≠âÊ®°Âùó,ÂèØÊ†πÊçÆÈúÄË¶ÅÊñ∞Â¢ûÊ®°ÂùóÂç≥ÂèØËΩªÊùæÈõÜÊàê.", img: siteProjectIcon3, link: "https://github.com/yangmufa/RocAdmin" },
        { title: "RocFlow", introduce: "Âü∫‰∫éRocAdminÁöÑÂ∑•‰ΩúÊµÅÊ°ÜÊû∂", img: siteProjectIcon6, link: "https://github.com/yangmufa/RocFlow" },
        { title: "RocBlog", introduce: "Âü∫‰∫é.Net10+PostgreSql18+React19+NextJs15ÁöÑÂçöÂÆ¢È°πÁõÆ, ÂÜÖÁΩÆÂêéÂè∞ÁÆ°ÁêÜ„ÄÅÊùÉÈôêÁÆ°ÁêÜ„ÄÅ‰ª£Á†ÅÁîüÊàê„ÄÅËµÑÊ∫êÂØºËà™„ÄÅÊäÄÊúØÁôæÁßëÁ≠âÊ®°Âùó", img: siteProjectIcon2, link: "https://github.com/yangmufa/RocBlog" },
        { title: "RocAuthor", introduce: "ÁÇ´ÈÖ∑ÂîØÁæéÁöÑ Á®ãÂ∫èÂëò‰∏ìÂ±û ‰∏™‰∫∫ÁÆÄ‰ªã,ÈááÁî®TypeScript5 + Vite6 + Axios2 + React19 + NextJs15 + AntDesign5 + SCSS2", img: siteProjectIcon1, link: "https://github.com/yangmufa/RocAuthor" },
        { title: "RocJilehe", introduce: "Âî±„ÄÅË∑≥„ÄÅrap„ÄÅÁØÆÁêÉ,Âü∫‰∫éJavaScript + HTML5 + CSS3", img: siteProjectIcon1, link: "https://github.com/yangmufa/RocJilehe" },
    ]); // È°πÁõÆ
    const currentYear = new Date().getFullYear();

    // ÁÇπÂáªqqÊàñÊâìËµèÂõæÊ†áÁöÑÂõûË∞É
    const showModalHandle = (img:string) => {
        if (img == "qq") {
            setPopPicture(qqImg.src);
        }
        if (img == "weixin") {
            setPopPicture(weixinImg.src);
        }
        if (img == "sponsor") {
            setPopPicture(sponsorImg.src);
        }
        setShowModal(true);
    };

    // ÁÇπÂáªÊåâÈíÆÂàáÁôΩÂ§©/ÈªëÂ§úÊ®°Âºè
    const handleDarkLightClick = (isDark: boolean) => {
        setIsDarkMode(isDark);
        const newTheme = isDark ? 'dark' : 'light';
        // Â≠òÂÇ®Âà∞localStoreÈÅøÂÖçÂà∑Êñ∞‰∏¢Â§±
        localStorage.setItem('theme', newTheme);
        console.log("is",isDarkMode);
    };


    // Ê£ÄÊü•Á™óÂè£ÊòØÂê¶Â§ß‰∫é 992pxÔºåÂπ∂ËÆæÁΩÆ isDesktop
    const checkIfDesktop = () => {
        // 992px ‰Ωú‰∏∫Ê°åÈù¢Á´ØÁöÑÊ†áÂáÜ
        setIsDesktop(window.innerWidth >= 992);
    };

    // ÁªÑ‰ª∂ÊåÇËΩΩÊó∂ÊâßË°å
    useEffect(() => {
        // È°µÈù¢Âä†ËΩΩÊó∂Ê£ÄÊµãÂ±èÂπïÂ∞∫ÂØ∏
        checkIfDesktop();

        // ÁõëÂê¨Á™óÂè£ÂèòÂåñ
        window.addEventListener('resize', checkIfDesktop);

        // Á¨¨‰∏ÄÊ¨°Âä†ËΩΩÊàñÂà∑Êñ∞Âêé‰ªé localStorage Ëé∑ÂèñÈªë/ÁôΩÂ§©ËÆæÂÆö
        const savedTheme = localStorage.getItem('theme');
        setIsDarkMode(savedTheme === 'dark');

        // ÁªÑ‰ª∂Âç∏ËΩΩÊó∂ÁßªÈô§‰∫ã‰ª∂ÁõëÂê¨
        return () => {
            window.removeEventListener('resize', checkIfDesktop);
        };
    }, []); // Á©∫‰æùËµñÊï∞ÁªÑË°®Á§∫Âè™Âú®ÊåÇËΩΩÂíåÂç∏ËΩΩÊó∂ÊâßË°å

    return (
        <HomePage>
            <Layout className={`${isDarkMode ? 'dark' : 'light'}`}>
                <Content>
                    <Row gutter={[16, 16]}>
                        {/*Á¨¨‰∏ÄÂàóÔºöÂç†5‰ªΩÔºåÊâãÊú∫Á´ØÈöêËóè*/}
                        {isDesktop && (
                            <Col className="layout-col-left" span={24} xs={0} sm={0} md={5} lg={5}>
                                <div className="head-portrait">
                                    {/*<img src={headPortraitKuang.src} style={{position: 'absolute',top:'-15%',left:'-10%',width: '120%', aspectRatio:' 1/1',}} alt=""/>*/}
                                    <Image src={headPortraitKuang.src} alt="" fill style={{ position: 'absolute', top: '-15%', left: '-10%', width: '120%' }} />
                                </div>
                                <div className="left-div left-des">
                                    <div className="left-des-item">
                                        {/*<img src={location.src} alt=""/>*/}
                                        <Image src={location} alt="" fill />
                                        China-Guangzhou
                                    </div>
                                    <div className="left-des-item">
                                        {/*<img src={briefcase.src} alt=""/>*/}
                                        <Image src={briefcase} alt="" fill />
                                        Technology Ltd.
                                    </div>
                                </div>
                                <div className="left-div left-tag">
                                    <div className="left-tag-item">ÁΩëÁòæ</div>
                                    <div className="left-tag-item">Â∞èÂ≠¶Áîü</div>
                                    <div className="left-tag-item">Âä®Êº´</div>
                                    <div className="left-tag-item">„Ää‰∏â‰Ωì„Äã</div>
                                    <div className="left-tag-item">Coding</div>
                                    <div className="left-tag-item">ÊóÖËÄÖ</div>
                                    <div className="left-tag-item">È™ëË°å</div>
                                </div>
                                <div className="left-div left-time">
                                    <ul className="left-time-line">
                                        <li>
                                            <div className="focus"></div>
                                            <a className="link-text" href="https://admin.yangmufa.cn">RocAdmin<br/>ÔºöÂü∫‰∫é.Net10+Abp.vNext9+ Vue3+Postgresql18ÁöÑ‰ºÅ‰∏öÁ∫ß‰∏≠ÂêéÂè∞Âø´ÈÄüÂºÄÂèëÊ°ÜÊû∂‰∏äÁ∫øÂºÄÊ∫ê</a>
                                            <div>Ôºö2026.7</div>
                                        </li>
                                        <li>
                                            <div className="focus"></div>
                                            <a className="link-text" href="https://flow.yangmufa.cn">RocFlow<br/>ÔºöÂü∫‰∫é.Net8ÁöÑ‰ºÅ‰∏öÁ∫ßÂ∑•‰ΩúÊµÅÊ°ÜÊû∂‰∏äÁ∫øÂºÄÊ∫ê</a>
                                            <div>Ôºö2025.12</div>
                                        </li>
                                        <li>
                                            <div className="focus"></div>
                                            <div>
                                                <a className="link-text" href="https://www.yangmufa.cn">RocBlog-V3<br/>ÔºöÂü∫‰∫é.Net8ÂíåReact19ÊäÄÊúØÊûÑÂª∫ÁöÑÁ¨¨3ÁâàÂçöÂÆ¢Áü•ËØÜÂ∫ìÁ≥ªÁªü‰∏äÁ∫øÂºÄÊ∫ê</a>
                                            </div>
                                            <div>Ôºö2025.4</div>
                                        </li>
                                        <li>
                                            <div className="focus"></div>
                                            <div>
                                                <a className="link-text" href="#">RocAuthor<br/>ÔºöÂü∫‰∫éReact19ÁöÑÁ®ãÂ∫èÂëòÂú®Á∫øÁÆÄÂéÜ‰∏äÁ∫øÂºÄÊ∫ê</a>
                                            </div>
                                            <div>Ôºö2024.12</div>
                                        </li>
                                        <li>
                                            <div className="focus"></div>
                                            <div>
                                                <a className="link-text" href="#">Âä†ÂÖ•ÂπøÂ∑ûXXXÈõÜÂõ¢Â∑•‰∏öËá™Âä®ÂåñÈ¢ÜÂüü<br/>ÔºöË¥üË¥£ÊüêÊñ∞ËÉΩÊ∫êÂÆ¢Êà∑ËΩØ‰ª∂‰ª£Á†ÅÁºñÂÜô</a>
                                            </div>
                                            <div>Ôºö2023.6</div>
                                        </li>
                                        <li>
                                            <div className="focus"></div>
                                            <div>
                                                <a className="link-text" href="#">Êç°Ëµ∑‰∫ÜÁ¢éÁöÑ‰∏ÄÂú∞ÁöÑITÁü•ËØÜ</a>
                                            </div>
                                            <div>Ôºö2023.2</div>
                                        </li>
                                        <li>
                                            <div className="focus"></div>
                                            <div>
                                                <a className="link-text" href="#">Á¶ªËÅåÂá∫Êù•ÂêéÊ¥óÂøÉÈù©Èù¢,ÂÜ≥ÂÆö‰∏ìÂøÉÂ≠¶‰π†Â∑©Âõ∫‰∏ì‰∏öÊäÄËÉΩ</a>
                                            </div>
                                            <div>Ôºö2022.6</div>
                                        </li>
                                        <li>
                                            <div className="focus"></div>
                                            <div>
                                                <a className="link-text" href="#">RocBlog-V2<br/>‰ΩøÁî®Java+VueÊûÑÂª∫ÁöÑ‰∫∫ÁîüÁ¨¨2ÁâàÂçöÂÆ¢ÁΩëÁ´ô‰∏äÁ∫ø</a>
                                            </div>
                                            <div>Ôºö2021.9</div>
                                        </li>
                                        <li>
                                            <div className="focus"></div>
                                            <div>
                                                <a className="link-text" href="#">Âä†ÂÖ•Ë¥µÈò≥XXÁßëÊäÄÈõÜÂõ¢<br/>ÔºöË¥üË¥£ÊüêÁúÅ‰∏ú\ÂçóÈÉ®ÊüêÈ°π‰∏öÂä°ÁöÑÂîÆÂêéÂíåËøêËê•</a>
                                            </div>
                                            <div>Ôºö2020.12</div>
                                        </li>
                                        <li>
                                            <div className="focus"></div>
                                            <div>
                                                <a className="link-text" href="#">RocBlog-V1<br/>ÊîæÊöëÂÅáÂú®ÂÆ∂‰ΩøÁî®WorldPressÊûÑÂª∫ÁöÑ‰∫∫ÁîüÁ¨¨1ÁâàÂçöÂÆ¢ÁΩëÁ´ô‰∏äÁ∫ø</a>
                                            </div>
                                            <div>Ôºö2018.8</div>
                                        </li>
                                    </ul>
                                </div>
                            </Col>
                        )}
                        {/*Á¨¨‰∫åÂàóÔºöÂç†19‰ªΩÔºåÊâãÊú∫ÂíåÁîµËÑëÁ´ØÈÉΩÊòæÁ§∫*/}
                        <Col className="layout-col-right" span={19} xs={24} sm={24} md={19} lg={19}>
                            {/*ÂºπÊ°Ü-ÊòæÁ§∫qqÂæÆ‰ø°ÁÖßÁâáÁ≠â*/}
                            <Modal open={showModal} onCancel={()=> setShowModal(false)} centered footer={null} closeIcon={null} title="" width={'auto'}>
                                {/*<img src={popPicture} alt="" style={{maxWidth: '150px', maxHeight: '250px', margin: '0px',display:'flex',alignItems:'center',justifyContent:'center'}}/>*/}
                                <Image src={popPicture} alt="" fill style={{maxWidth: '150px', maxHeight: '250px', margin: '0px',display:'flex',alignItems:'center',justifyContent:'center'}} />
                            </Modal>
                            {!isDesktop && (
                                <div className="index-head-portrait">
                                    {/*<img src={headPortraitKuang.src}  style={{position:'absolute',top:'-15%',left:'-10%',width:'120%',aspectRatio:'1/1',}}alt=""/>*/}
                                    <Image src={headPortraitKuang} alt="" fill style={{position:'absolute',top:'-15%',left:'-10%',width:'120%',aspectRatio:'1/1',}} />
                                </div>
                            )}
                            <div className="welcome">
                                Hello I' m
                                <span className="gradientText">YangMufa</span>
                                <h6>ÁªÉ‰π†ÁºñÁ®ã‰∏§Âπ¥Âçä,ÂñúÊ¨¢CV„ÄÅTab„ÄÅAgent „ÄÇ</h6>
                            </div>
                            <div className="description">
                                üë¶
                                <span className="purpleText">C#.Net</span>&nbsp;
                                B/S&nbsp;
                                <span className="purpleText">Full Stack</span>&nbsp;
                                Developer
                            </div>
                            <div className="description">
                                üìù The only way to achieve greatness is to
                                <span className="purpleText textBackground">love</span>
                                and
                                <span className="purpleText textBackground">persevere</span> in what you do.
                            </div>
                            <div className="iconContainer">
                                <Popover title="" trigger="click" content={
                                    <div>
                                        <Button type="link" href="https://gitee.com/yangmufa">
                                            Gitee
                                        </Button>
                                        <br/>
                                        <Button type="link" href="https://github.com/yangmufa">
                                            Github
                                        </Button>
                                    </div>
                                }>
                                    <div className="iconItem">
                                        {/*<img src={githubSvgIcon.src} alt=""/>*/}
                                        <Image src={githubSvgIcon} alt="" fill />
                                        <div className="iconTip">Git</div>
                                    </div>
                                </Popover>
                                {/* Á¨¨‰∫å‰∏™ Popover */}
                                <Popover title="ÁΩëÊòìÈÇÆÁÆ±" trigger="click" content={
                                    <Button type="link" href="https://mail.163.com">
                                        yangmufa@163.com
                                    </Button>
                                }>
                                    <div className="iconItem">
                                        {/*<img src={mailSvgIcon.src} alt=""/>*/}
                                        <Image src={mailSvgIcon} alt="" fill />
                                        <div className="iconTip">Mail</div>
                                    </div>
                                </Popover>
                                <a className="iconItem" onClick={()=>{showModalHandle('sponsor'); }} href="#">
                                    {/*<img src={sponsorSvgIcon.src} alt=""/>*/}
                                    <Image src={sponsorSvgIcon} alt="" fill />
                                    <div className="iconTip">ËµûÂä©</div>
                                </a>
                                <a className="iconItem" onClick={() => {showModalHandle('qq'); }} href="#">
                                    {/*<img src={qqSvgIcon.src} alt=""/>*/}
                                    <Image src={qqSvgIcon} alt="" fill />
                                    <div className="iconTip">QQ</div>
                                </a>
                                <a className="iconItem" onClick={() => {showModalHandle('weixin'); }} href="#">
                                    {/*<img src={weixinSvgIcon.src} alt=""/>*/}
                                    <Image src={weixinSvgIcon} alt="" fill />
                                    <div className="iconTip">ÂæÆ‰ø°</div>
                                </a>
                                <a className="switch">
                                    <Switch checked={isDarkMode} onChange={handleDarkLightClick} checkedChildren="ÈªëÂ§ú" unCheckedChildren="ÁôΩÂ§©" defaultChecked={false} />
                                </a>
                            </div>
                            <div className="tanChiShe">
                                {/*<img src={themeIcon.src} alt=""/>*/}
                                <Image src={themeIcon} alt="" fill />
                            </div>
                            <div className="title">
                                {/*<img src={siteSvgIcon.src} alt=""/>*/}
                                <Image src={siteSvgIcon} alt="" fill />
                                Site
                            </div>
                            <div className="projectList">
                                {site.map((siteData, index) => (
                                    <a
                                        key={index}
                                        className="projectItem a"
                                        target="_blank"
                                        href={siteData.link}
                                    >
                                        <div className="projectItemLeft">
                                            <h1>{siteData.title}</h1>
                                            <p>{siteData.introduce}</p>
                                        </div>
                                        <div className="projectItemRight">
                                            {/*<img src={siteData.img.src} alt="" />*/}
                                            <Image src={siteData.img} alt="" fill />
                                        </div>
                                    </a>
                                ))}
                            </div>
                            <div className="title">
                                {/*<img src={projectSvgIcon.src} alt=""/>*/}
                                <Image src={projectSvgIcon} alt="" fill />
                                Project
                            </div>
                            <div className="projectList">
                                {project.map((projectData, index) => (
                                    <a key={index} className="projectItem b" target="_blank" href={projectData.link}>
                                        <div className="projectItemLeft">
                                            <h1>{projectData.title}</h1>
                                            <p>{projectData.introduce}</p>
                                        </div>
                                        <div className="projectItemRight">
                                            {/*<img src={projectData.img.src} alt=""/>*/}
                                            <Image src={projectData.img} alt="" fill />
                                        </div>
                                    </a>
                                ))}
                            </div>
                            <div className="title">
                                <img src={skillsSvgIcon.src} alt=""/>
                                Skills
                            </div>
                            <div className="skill">
                                {/*<img className="skillPcImg" src={skillPcSvgIcon.src} alt="" srcSet=""/>*/}
                                <Image src={skillPcSvgIcon} alt="" fill />
                                {/*<img className="skillWapImg" src={skillWapSvgIcon.src} alt="" srcSet=""/>*/}
                                <Image src={skillWapSvgIcon} alt="" fill />
                            </div>
                        </Col>
                    </Row>
                </Content>
                <Footer className={`${isDarkMode ? 'dark' : 'light'} layout-footer`}>
                    <div className="layout-footer-left">
                        RocAuthor ¬© {currentYear} Created by ÁºñÁ®ãÁªÉ‰π†Áîü
                    </div>
                    <div className="layout-footer-right">
                        {/*<img src={policeBadge.src} alt="" style={{ width: 15, height: 15, marginRight: 5 }} />*/}
                        <Image src={policeBadge} alt="" fill style={{ width: 15, height: 15, marginRight: 5 }} />
                        <a href="https://beian.miit.gov.cn" className="mr-4 hover:underline md:mr-6" >Â§áÊ°àÂè∑ÔºöÈªîICPÂ§á19007557Âè∑</a>
                    </div>
                </Footer>
            </Layout>
        </HomePage>
    );
}
